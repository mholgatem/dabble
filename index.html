
<!DOCTYPE html>
<html>
  <head>
    <title>dabble</title>
    <meta charset="utf-8" />
  </head>
  <body>
    <p>dabble</p>

    <pre id="content" style="white-space: pre-wrap;"></pre>
    <div id="preview"></div>
    <p id="output"></p>

    <script type="text/javascript">
      function getUrlVars() {
        var vars = {files: "", export: "", action: "", user: ""};
        var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {
            vars[key] = value;
        });
        return vars;
        }
      var txt = '<iframe src="https://drive.google.com/file/d/{file}/preview"></iframe>'
      var param = getUrlVars();
      var files = param['files'].split("%2C").concat(param['export'].split("%2C"));
      var htmlString = [];
      for (var i = 0; i < files.length; i++){
        if (files[i] != ""){
          htmlString.push(txt.replace("{file}", files[i]));
        }
      }
      document.getElementById("preview").innerHTML = htmlString.join('');
      var content = document.createTextNode(htmlString.join('<br>'));
      document.getElementById("output").appendChild(content);
      
       fetch('https://www.googleapis.com/drive/v3/files/11M0eAGG73cDryIc4rod3PEFIy-xWTwbs9A?acknowledgeAbuse=true&supportsTeamDrives=true')
  .then(function(response) {
    return response.json();
  })
  .then(function(myJson) {
    console.log(JSON.stringify(myJson));
  });
    </script>


  </body>
</html>

